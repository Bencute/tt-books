(function(){'use strict';window.addEventListener('load',function(){var c=document.getElementsByClassName('js-needs-validation');var d=Array.prototype.filter.call(c,function(b){let ruleValidate=JSON.parse(b.getAttribute('data-validate-rules'));b.formValidator=new FormValidator(b,ruleValidate);b.addEventListener('submit',function(a){let resultValidate=b.formValidator.validate();if(!resultValidate){a.preventDefault();a.stopPropagation()}},false)});var f=document.querySelectorAll('[data-confirm]');for(let item of f){item.addEventListener('click',function(e){let textConfirm=this.getAttribute('data-confirm');if(!confirm(textConfirm)){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation()}},false)}var g=document.querySelectorAll('[data-method=post]');for(let postLink of g){postLink.addEventListener('click',function(e){let link=this.href;let form=document.createElement('form');form.method='post';form.action=link;var a=document.querySelector('[type="csrf"]');let csrfToken=a.content;let csrfName=a.name;let hiddenField=document.createElement('input');hiddenField.type='hidden';hiddenField.name=csrfName;hiddenField.value=csrfToken;form.appendChild(hiddenField);document.body.appendChild(form);form.submit();e.preventDefault()})}},false)})();class FormValidator{errors={};validated=[];constructor(form,rules){this.form=form;this.rules=rules}validate(){this.errors={};for(var index in this.rules){this.rules[index].forEach(function(a,b,c){if(typeof this[a[1]]!="undefined"){let input=this.form[index];input.classList.remove('is-valid');input.classList.remove('is-invalid');this[a[1]](input,index,a,a['params']);if(!this.wasValidated(index))this.validated.push(index)}},this);let input=this.form[index];if(this.wasValidated(index)){if(this.hasError(index)){input.classList.remove('is-valid');input.classList.add('is-invalid')}else{input.classList.remove('is-invalid');input.classList.add('is-valid')}}}this.renderError();return Object.keys(this.errors).length==0}vRequire(input,nameInput,rule,params){let value=input.value;if(value==''){this.addError(nameInput,rule['message']);return false}else{return true}}vLength(input,nameInput,rule,params){let value=input.value;if(value!==''&&value.length>params['max']){this.addError(nameInput,rule['message']['max']);return false}if(value!==''&&value.length<params['min']){this.addError(nameInput,rule['message']['min']);return false}return true}vCompare(input,nameInput,rule,params){let value=input.value;let compareInput=this.form[rule['compareAttribute']];if(value!=compareInput.value){this.addError(nameInput,rule['message']);return false}return true}vEmail(input,nameInput,rule,params){let value=input.value;if(value!==''&&!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(value)){this.addError(nameInput,rule['message']);return false}return true}addError(nameInput,message){if(typeof this.errors[nameInput]=="undefined")this.errors[nameInput]=[];this.errors[nameInput].push(message)}renderError(){for(let index in this.errors){let input=this.form[index];input.classList.add('is-invalid');let errorBlock=input.parentElement.querySelector(".invalid-feedback");if(errorBlock!==null){errorBlock.innerHTML=this.errors[index].join('<br>')}}}hasError(index){return typeof this.errors[index]!="undefined"}wasValidated(index){return this.validated.indexOf(index)!==-1}}